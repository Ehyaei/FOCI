<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Variable selection by the FOCI algorithm — foci • FOCI</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Variable selection by the FOCI algorithm — foci" />
<meta property="og:description" content="FOCI is a variable selection algorithm based on the measure of conditional dependence codec." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FOCI</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/articles/FOCI.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/articles/CODEC.html">CODEC</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Variable selection by the FOCI algorithm</h1>
    
    <div class="hidden name"><code>foci.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>FOCI is a variable selection algorithm based on the measure of conditional dependence <code><a href='codec.html'>codec</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>foci</span><span class='op'>(</span>
  <span class='va'>Y</span>,
  <span class='va'>X</span>,
  num_features <span class='op'>=</span> <span class='cn'>NULL</span>,
  stop <span class='op'>=</span> <span class='cn'>TRUE</span>,
  na.rm <span class='op'>=</span> <span class='cn'>TRUE</span>,
  standardize <span class='op'>=</span> <span class='st'>"scale"</span>,
  numCores <span class='op'>=</span> <span class='fu'>parallel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/parallel/detectCores.html'>detectCores</a></span><span class='op'>(</span><span class='op'>)</span>,
  parPlat <span class='op'>=</span> <span class='st'>"none"</span>,
  printIntermed <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Y</th>
      <td><p>Vector of responses (length n)</p></td>
    </tr>
    <tr>
      <th>X</th>
      <td><p>Matrix of predictors (n by p)</p></td>
    </tr>
    <tr>
      <th>num_features</th>
      <td><p>Number of variables to be selected, cannot be larger than p. The default value is NULL and in that
case it will be set equal to p. If stop == TRUE (see below), then num_features is irrelevant.</p></td>
    </tr>
    <tr>
      <th>stop</th>
      <td><p>Stops at the first instance of negative codec, if TRUE.</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>Removes NAs if TRUE.</p></td>
    </tr>
    <tr>
      <th>standardize</th>
      <td><p>Standardize covariates if set equal to "scale" or "bounded". Otherwise will use the raw inputs.
The default value is "scale" and normalizes each column of X to have mean zero and variance 1. If set equal to "bounded"
map the values of each column of X to 0, 1.</p></td>
    </tr>
    <tr>
      <th>numCores</th>
      <td><p>Number of cores that are going to be used for
parallelizing the variable selecction process.</p></td>
    </tr>
    <tr>
      <th>parPlat</th>
      <td><p>Specifies the parallel platform to chunk data by rows.
It can take three values:
1- The default value is set to 'none', in which case no row chunking
is done;
2- the <code>parallel</code> cluster to be used for row chunking;
3- "locThreads", specifying that row chunking will be done via
threads on the host machine.</p></td>
    </tr>
    <tr>
      <th>printIntermed</th>
      <td><p>The default value is TRUE, in which case print intermediate results from the cluster nodes before final processing.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class "foci", with attributes
<code>selectedVar</code>, showing the selected variables in decreasing
order of (conditional) predictive power, and <code>stepT</code>, listing
the 'codec' values. Typically the latter will begin to level off at
some point, with additional marginal improvements being small.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>FOCI is a forward stepwise algorithm that uses the conditional dependence coefficient (<code><a href='codec.html'>codec</a></code>)
at each step, instead of the multiple correlation coefficient
as in ordinary forward stepwise. If <code>stop</code> == TRUE, the process is stopped at the first instance of
nonpositive codec, thereby selecting a subset of variables. Otherwise, a set of covariates of size
<code>num_features</code>, ordered according to predictive power (as measured by codec) is produced.</p>
<p><em>Parallel computation:</em></p>
<p>The computation can be lengthy, so the package offers two kinds of
parallel computation.</p>
<p>The first, controlled by the argument <code>numCores</code>,
specifies the number of cores to be used on the host
machine. If at a given step there are k candidate variables
under consideration for inclusion, these k tasks are assigned
to the various cores.</p>
<p>The second approach, controlled by the argument <code>parPlat</code>
("parallel platform"), involves the user first setting up a cluster via
the <span class="pkg">parallel</span> package. The data are divided into chunks by rows,
with each cluster node applying FOCI to its data chunk.  The
union of the results is then formed, and fed through FOCI one more
time to adjust the discrepancies. The idea is that that last step
will not be too lengthy, as the number of candidate variables has
already been reduced.  A cluster size of r may actually
produce a speedup factor of more than r (Matloff 2016).</p>
<p>Potentially the best speedup is achieved by using the two approaches
together.</p>
<p>The first approach cannot be used on Windows platforms, as
<code>parallel::mcapply</code> has no effect.  Windows users should thus
use the second approach only.</p>
<p>In addition to speed, the second approach is useful for diagnostics, as
the results from the different chunks gives the user an
idea of the degree of sampling variability in the
FOCI results.</p>
<p>In the second approach, a random permutation is applied to the
rows of the dataset, as many datasets are sorted by one or more
columns.</p>
<p>Note that if a certain value of a feature is rare in the
full dataset, it may be absent entirely in some chunk.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Azadkia, M. and Chatterjee, S. (2019). A simple measure
of conditional dependence.
<a href='https://arxiv.org/pdf/1910.12327.pdf'>https://arxiv.org/pdf/1910.12327.pdf</a>.</p>
<p>Matloff, N. (2016). Software Alchemy: Turning Complex
Statistical Computations into Embarrassingly-Parallel Ones.
<em>J. of Stat. Software.</em></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='codec.html'>codec</a></code>, <code><a href='https://rdrr.io/pkg/XICOR/man/xicor.html'>xicor</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Mona Azadkia, Sourav Chatterjee, and Norman Matloff</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='co'># Example 1</span></span>
<span class='r-in'><span class='va'>n</span> <span class='op'>=</span> <span class='fl'>1000</span></span>
<span class='r-in'><span class='va'>p</span> <span class='op'>=</span> <span class='fl'>100</span></span>
<span class='r-in'><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>n</span> <span class='op'>*</span> <span class='va'>p</span><span class='op'>)</span>, nrow <span class='op'>=</span> <span class='va'>n</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>"x"</span>, <span class='va'>p</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='va'>p</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>y</span> <span class='op'>&lt;-</span> <span class='va'>x</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>]</span> <span class='op'>*</span> <span class='va'>x</span><span class='op'>[</span>, <span class='fl'>10</span><span class='op'>]</span> <span class='op'>+</span> <span class='va'>x</span><span class='op'>[</span>, <span class='fl'>20</span><span class='op'>]</span><span class='op'>^</span><span class='fl'>2</span></span>
<span class='r-in'><span class='co'># with num_features equal to 3 and stop equal to FALSE, foci will give a list of</span></span>
<span class='r-in'><span class='co'># three selected features</span></span>
<span class='r-in'><span class='va'>result1</span> <span class='op'>=</span> <span class='fu'>foci</span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>x</span>, num_features <span class='op'>=</span> <span class='fl'>3</span>, stop <span class='op'>=</span> <span class='cn'>FALSE</span>, numCores <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>result1</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> $selectedVar</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    index names</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1:    20   x20</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2:    10   x10</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3:     1    x1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> $stepT</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 0.3744814 0.4269214 0.8307098</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> attr(,"class")</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "foci"</span>
<span class='r-in'><span class='co'># Example 2</span></span>
<span class='r-in'><span class='co'># same example, but stop according to the stopping rule</span></span>
<span class='r-in'><span class='va'>result2</span> <span class='op'>=</span> <span class='fu'>foci</span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>x</span>, numCores <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>result2</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> $selectedVar</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    index names</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1:    20   x20</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2:    10   x10</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3:     1    x1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> $stepT</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] 0.3744814 0.4269214 0.8307098</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> attr(,"class")</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "foci"</span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'><span class='co'># Windows use of multicore</span></span>
<span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>parallel</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>cls</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/parallel/makeCluster.html'>makeCluster</a></span><span class='op'>(</span><span class='fu'>parallel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/parallel/detectCores.html'>detectCores</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>foci</span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>x</span>, parPlat <span class='op'>=</span> <span class='va'>cls</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'># run on physical cluster</span></span>
<span class='r-in'><span class='va'>cls</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/parallel/makeCluster.html'>makePSOCKcluster</a></span><span class='op'>(</span><span class='st'>'machineA'</span>,<span class='st'>'machineB'</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>foci</span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>x</span>, parPlat <span class='op'>=</span> <span class='va'>cls</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Mona Azadkia, Sourav Chatterjee, Norman Matloff, Ahmad Ehyaei.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


